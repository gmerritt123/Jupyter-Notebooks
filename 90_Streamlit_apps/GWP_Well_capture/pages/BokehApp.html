<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Well Capture</title>
    <style>
      html, body {
        box-sizing: border-box;
        display: flow-root;
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
    <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-3.4.1.min.js"></script>
    <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-widgets-3.4.1.min.js"></script>
    <script type="text/javascript">
        Bokeh.set_log_level("info");
    </script>
  </head>
  <body>
    <div id="ab2377b8-c9b3-4943-9672-d8b7f078080b" data-root-id="p1658" style="display: contents;"></div>
  
    <script type="application/json" id="d5d7d410-16b7-471f-99a2-a68e13c2059f">
      {"dc4ddd6d-8f0b-4770-a145-04dc090b6a6f":{"version":"3.4.1","title":"Bokeh Application","roots":[{"type":"object","name":"Column","id":"p1658","attributes":{"sizing_mode":"stretch_both","children":[{"type":"object","name":"Slider","id":"p1566","attributes":{"js_property_callbacks":{"type":"map","entries":[["change:value",[{"type":"object","name":"CustomJS","id":"p1657","attributes":{"args":{"type":"map","entries":[["src",{"type":"object","name":"ColumnDataSource","id":"p1625","attributes":{"selected":{"type":"object","name":"Selection","id":"p1626","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p1627"},"data":{"type":"map","entries":[["y",[]],["x",[]]]}}}],["sl_dict",{"type":"map","entries":[["Pumping",{"id":"p1566"}],["Thickness",{"type":"object","name":"Slider","id":"p1567","attributes":{"js_property_callbacks":{"type":"map","entries":[["change:value",[{"id":"p1657"}]]]},"stylesheets":[{"type":"object","name":"InlineStyleSheet","id":"p1565","attributes":{"css":"div.bk-slider-title{\n                font-family: arial;\n                font-weight: bold;\n                font-size: 14pt;\n                color: #17648D;\n"}}],"width":800,"title":"Aquifer thickness (m)","format":"0.00","start":1,"end":100,"value":20,"step":0.01}}],["Gradient",{"type":"object","name":"Slider","id":"p1569","attributes":{"js_property_callbacks":{"type":"map","entries":[["change:value",[{"id":"p1657"}]]]},"stylesheets":[{"id":"p1565"}],"width":800,"title":"Gradient of regional flow (dimensionless)","format":{"type":"object","name":"CustomJSTickFormatter","id":"p1568","attributes":{"code":"return (10**tick).toExponential(2).toString()"}},"start":-5,"end":0,"value":-5,"step":0.1}}],["Conductivity",{"type":"object","name":"Slider","id":"p1571","attributes":{"js_property_callbacks":{"type":"map","entries":[["change:value",[{"id":"p1657"}]]]},"stylesheets":[{"id":"p1565"}],"width":800,"title":"Hydraulic Conductivity (m/s)","format":{"type":"object","name":"CustomJSTickFormatter","id":"p1570","attributes":{"code":"return (10**tick).toExponential(2).toString()"}},"start":-7,"end":0,"value":-3,"step":0.01}}]]}],["f",{"type":"object","name":"Figure","id":"p1572","attributes":{"width":800,"height":800,"sizing_mode":"stretch_both","x_range":{"type":"object","name":"Range1d","id":"p1582","attributes":{"start":-10}},"y_range":{"type":"object","name":"Range1d","id":"p1583","attributes":{"start":-5,"end":5}},"x_scale":{"type":"object","name":"LinearScale","id":"p1584"},"y_scale":{"type":"object","name":"LinearScale","id":"p1585"},"title":{"type":"object","name":"Title","id":"p1575","attributes":{"text":"Well capture zone of a pumping well","text_color":"#17648D","text_font":"arial","text_font_size":"16pt"}},"renderers":[{"type":"object","name":"GlyphRenderer","id":"p1620","attributes":{"data_source":{"type":"object","name":"ColumnDataSource","id":"p1614","attributes":{"selected":{"type":"object","name":"Selection","id":"p1615","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p1616"},"data":{"type":"map","entries":[["x",[0]],["y",[0]]]}}},"view":{"type":"object","name":"CDSView","id":"p1621","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p1622"}}},"glyph":{"type":"object","name":"Scatter","id":"p1617","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"size":{"type":"value","value":12},"line_color":{"type":"value","value":"#1f77b4"},"fill_color":{"type":"value","value":"red"},"marker":{"type":"value","value":"circle_x"}}},"nonselection_glyph":{"type":"object","name":"Scatter","id":"p1618","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"size":{"type":"value","value":12},"line_color":{"type":"value","value":"#1f77b4"},"line_alpha":{"type":"value","value":0.1},"fill_color":{"type":"value","value":"red"},"fill_alpha":{"type":"value","value":0.1},"hatch_alpha":{"type":"value","value":0.1},"marker":{"type":"value","value":"circle_x"}}},"muted_glyph":{"type":"object","name":"Scatter","id":"p1619","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"size":{"type":"value","value":12},"line_color":{"type":"value","value":"#1f77b4"},"line_alpha":{"type":"value","value":0.2},"fill_color":{"type":"value","value":"red"},"fill_alpha":{"type":"value","value":0.2},"hatch_alpha":{"type":"value","value":0.2},"marker":{"type":"value","value":"circle_x"}}}}},{"type":"object","name":"GlyphRenderer","id":"p1634","attributes":{"data_source":{"id":"p1625"},"view":{"type":"object","name":"CDSView","id":"p1635","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p1636"}}},"glyph":{"type":"object","name":"Patch","id":"p1631","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"line_color":"#1f77b4","fill_color":"#1f77b4","fill_alpha":0.1}},"nonselection_glyph":{"type":"object","name":"Patch","id":"p1632","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"line_color":"#1f77b4","line_alpha":0.1,"fill_color":"#1f77b4","fill_alpha":0.1,"hatch_alpha":0.1}},"muted_glyph":{"type":"object","name":"Patch","id":"p1633","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"line_color":"#1f77b4","line_alpha":0.2,"fill_color":"#1f77b4","fill_alpha":0.2,"hatch_alpha":0.2}}}}],"toolbar":{"type":"object","name":"Toolbar","id":"p1581","attributes":{"tools":[{"type":"object","name":"PanTool","id":"p1596"},{"type":"object","name":"WheelZoomTool","id":"p1597","attributes":{"renderers":"auto"}},{"type":"object","name":"BoxZoomTool","id":"p1598","attributes":{"overlay":{"type":"object","name":"BoxAnnotation","id":"p1599","attributes":{"syncable":false,"level":"overlay","visible":false,"left":{"type":"number","value":"nan"},"right":{"type":"number","value":"nan"},"top":{"type":"number","value":"nan"},"bottom":{"type":"number","value":"nan"},"left_units":"canvas","right_units":"canvas","top_units":"canvas","bottom_units":"canvas","line_color":"black","line_alpha":1.0,"line_width":2,"line_dash":[4,4],"fill_color":"lightgrey","fill_alpha":0.5}}}},{"type":"object","name":"SaveTool","id":"p1604"},{"type":"object","name":"ResetTool","id":"p1605"},{"type":"object","name":"HelpTool","id":"p1606"}]}},"left":[{"type":"object","name":"LinearAxis","id":"p1591","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p1592","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"p1593"},"axis_label":"x (km)","axis_label_text_color":"#17648D","axis_label_text_font":"arial","axis_label_text_font_size":"14pt","axis_label_text_font_style":"bold","major_label_policy":{"type":"object","name":"AllLabels","id":"p1594"},"major_label_text_font":"arial","major_label_text_font_size":"12pt","major_label_text_font_style":"normal"}}],"below":[{"type":"object","name":"LinearAxis","id":"p1586","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p1587","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"p1588"},"axis_label":"y (km)","axis_label_text_color":"#17648D","axis_label_text_font":"arial","axis_label_text_font_size":"14pt","axis_label_text_font_style":"bold","major_label_policy":{"type":"object","name":"AllLabels","id":"p1589"},"major_label_text_font":"arial","major_label_text_font_size":"12pt","major_label_text_font_style":"normal"}}],"center":[{"type":"object","name":"Grid","id":"p1590","attributes":{"axis":{"id":"p1586"}}},{"type":"object","name":"Grid","id":"p1595","attributes":{"dimension":1,"axis":{"id":"p1591"}}},{"type":"object","name":"Arrow","id":"p1608","attributes":{"source":{"type":"object","name":"ColumnDataSource","id":"p1610","attributes":{"selected":{"type":"object","name":"Selection","id":"p1611","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p1612"},"data":{"type":"map"}}},"x_start":{"type":"value","value":100},"y_start":{"type":"value","value":600},"start_units":"screen","x_end":{"type":"value","value":200},"y_end":{"type":"value","value":600},"end_units":"screen","end":{"type":"object","name":"VeeHead","id":"p1607","attributes":{"size":{"type":"value","value":15}}}}},{"type":"object","name":"Label","id":"p1613","attributes":{"text":"Regional Gradient\nDirection","x":100,"y":600,"x_units":"screen","y_units":"screen","y_offset":-50}},{"type":"object","name":"Legend","id":"p1623","attributes":{"title_text_font":"arial","title_text_font_size":"14pt","title_text_font_style":"bold","label_text_color":"#17648D","label_text_font":"arial","label_text_font_size":"12pt","items":[{"type":"object","name":"LegendItem","id":"p1624","attributes":{"label":{"type":"value","value":"Pumping well"},"renderers":[{"id":"p1620"}]}},{"type":"object","name":"LegendItem","id":"p1637","attributes":{"label":{"type":"value","value":"Well capture zone"},"renderers":[{"id":"p1634"}]}}]}},{"type":"object","name":"Arrow","id":"p1641","attributes":{"source":{"type":"object","name":"ColumnDataSource","id":"p1638","attributes":{"selected":{"type":"object","name":"Selection","id":"p1639","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p1640"},"data":{"type":"map","entries":[["x0",[]],["y0",[]],["x1",[]],["y1",[]]]}}},"x_start":{"type":"field","field":"x0"},"y_start":{"type":"field","field":"y0"},"start":{"id":"p1607"},"x_end":{"type":"field","field":"x1"},"y_end":{"type":"field","field":"y1"},"end":{"id":"p1607"}}},{"type":"object","name":"Label","id":"p1646","attributes":{"visible":false,"text":"Max Width = ","x":0,"y":0}},{"type":"object","name":"Arrow","id":"p1651","attributes":{"source":{"type":"object","name":"ColumnDataSource","id":"p1648","attributes":{"selected":{"type":"object","name":"Selection","id":"p1649","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p1650"},"data":{"type":"map","entries":[["x0",[]],["y0",[]],["x1",[]],["y1",[]]]}}},"x_start":{"type":"field","field":"x0"},"y_start":{"type":"field","field":"y0"},"start":{"type":"object","name":"VeeHead","id":"p1647","attributes":{"size":{"type":"value","value":5}}},"x_end":{"type":"field","field":"x1"},"y_end":{"type":"field","field":"y1"},"end":{"id":"p1647"}}},{"type":"object","name":"Label","id":"p1656","attributes":{"visible":false,"text":"Culm. Pt. = ","x":0,"y":0}}],"match_aspect":true}}],["w_src",{"id":"p1638"}],["w_lbl",{"id":"p1646"}],["c_src",{"id":"p1648"}],["c_lbl",{"id":"p1656"}]]},"code":"// js function equivalent to np.linspace\nfunction makeArr(startValue, stopValue, cardinality) {\n  var arr = [];\n  var step = (stopValue - startValue) / (cardinality - 1);\n  for (var i = 0; i &lt; cardinality; i++) {\n\tarr.push(startValue + (step * i));\n  }\n  return arr;\n}\n\nimport * as d3 from \"https://cdn.jsdelivr.net/npm/d3@7.9/+esm\"\n\nexport default function({src,sl_dict,f,w_src,w_lbl,c_src,c_lbl}){\n\t//collect slider values\n\tvar q = sl_dict['Pumping'].value/10**9 //cubic km/s \n\tvar k = 10**sl_dict['Conductivity'].value/1000 //km/s\n\tvar i = 10**sl_dict['Gradient'].value\n\tvar b = sl_dict['Thickness'].value/1000 //km\n\n\t//get ymax and x0_conf\n\tvar ymax = q/(2*k*i*b)\n\tvar x0 = q/(2*Math.PI*k*i*b)\n\n\t//calculate array for y based on ymax\n\tvar ya = makeArr(-ymax*0.999,ymax*0.999, 1000)\n\t//calculate array for x based on ya\n\tvar xa = ya.map(y=&gt;y/(Math.tan(2*Math.PI*k*i*b*y/q))) //convert m to km\n\n\t//update src\n\tsrc.data = {'x':xa, 'y':ya}\n\tsrc.change.emit()\n\n\t//calculate figure bounds\n\tf.x_range.end = x0*1.1\n\tf.x_range.start = x0*-25\n\tvar yr = (f.x_range.end - f.x_range.start)/2\n\tf.y_range.start = -yr\n\tf.y_range.end = yr\n\t\n\t//calculate max width\n\tvar w = q/(k*i*b)\n\t\n\t//update max width annotation\n\tw_src.data={'x0':[x0*-22],'x1':[x0*-22],'y0':[-w/2], 'y1':[w/2]}\n    w_lbl.visible = true\n    w_lbl.text = 'Max Width = '+w.toFixed(2).toString()+' km'\n    w_lbl.x = x0*-21.25\n    \n    //update culm pt annotation\n    c_src.data={'x0':[0],'x1':[x0],'y0':[0], 'y1':[0]}\n    c_lbl.visible = true\n    c_lbl.text = 'X\u2080 =\\n'+x0.toFixed(2).toString()+' km'\n    c_lbl.x = -x0*1.7\n    c_lbl.y = w*0.05\n          \t\n}","module":true}}]]]},"stylesheets":[{"id":"p1565"}],"width":800,"title":"Pumping rate (m\u00b3/s)","format":"0.000","start":0,"end":0.2,"value":0,"step":0.001}},{"id":"p1567"},{"id":"p1569"},{"id":"p1571"},{"id":"p1572"}]}}]}}
    </script>
    <script type="text/javascript">
      (function() {
        const fn = function() {
          Bokeh.safely(function() {
            (function(root) {
              function embed_document(root) {
              const docs_json = document.getElementById('d5d7d410-16b7-471f-99a2-a68e13c2059f').textContent;
              const render_items = [{"docid":"dc4ddd6d-8f0b-4770-a145-04dc090b6a6f","roots":{"p1658":"ab2377b8-c9b3-4943-9672-d8b7f078080b"},"root_ids":["p1658"]}];
              root.Bokeh.embed.embed_items(docs_json, render_items);
              }
              if (root.Bokeh !== undefined) {
                embed_document(root);
              } else {
                let attempts = 0;
                const timer = setInterval(function(root) {
                  if (root.Bokeh !== undefined) {
                    clearInterval(timer);
                    embed_document(root);
                  } else {
                    attempts++;
                    if (attempts > 100) {
                      clearInterval(timer);
                      console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
                    }
                  }
                }, 10, root)
              }
            })(window);
          });
        };
        if (document.readyState != "loading") fn();
        else document.addEventListener("DOMContentLoaded", fn);
      })();
    </script>
  </body>
</html>